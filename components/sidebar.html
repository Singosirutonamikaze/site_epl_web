<!-- 
    COMPOSANT SIDEBAR R√âUTILISABLE
    =================================================================
    
    Ce composant est utilis√© sur toutes les pages du site EPL.
    Il contient la navigation principale et le bouton de th√®me.
    
    FONCTIONNALIT√âS :
    - Navigation responsive avec menu hamburger
    - Bouton de th√®me int√©gr√© (clair/sombre)
    - Gestion automatique des liens actifs
    - Compatible avec tous les th√®mes
    
    UTILISATION :
    - Charger via fetch() dans un conteneur #sidebar-container
    - Le JavaScript s'initialise automatiquement
    - Pas besoin de dupliquer le code sur chaque page
    
    CSS REQUIS : /css/components/sidebar.css
    JS REQUIS : /js/components/sidebar.js + /js/utils/themes.js
-->
<aside id="sidebar" class="sidebar" role="navigation" aria-label="Navigation principale">
    <!-- Header de la sidebar -->
    <div class="sidebar-header">
        <div class="sidebar-logo-container">
            <div class="sidebar-logo-cercle">
                <svg class="sidebar-logo-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M22 10v6M2 10l10-5 10 5-10 5z"/>
                    <path d="M6 12v5c3 3 9 3 12 0v-5"/>
                </svg>
            </div>
            <div class="sidebar-logo-texte">
                <div class="sidebar-logo-titre">EPL</div>
                <div class="sidebar-logo-sous-titre">√âcole Polytechnique</div>
            </div>
        </div>
        
        <!-- Bouton de th√®me dans la sidebar -->
        <div class="sidebar-theme-selector">
            <button id="bouton-theme-dynamique" class="btn-theme-dynamique" 
                    aria-label="Changer de th√®me"
                    title="Changer de th√®me">
                <svg class="icone-theme-dynamique" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <circle cx="12" cy="12" r="5"/>
                    <path d="M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"/>
                </svg>
            </button>
        </div>
    </div>
    
    <!-- Navigation principale -->
    <nav class="sidebar-nav" role="menubar">
        <div class="sidebar-nav-item" role="none">
            <a href="/index.html" class="sidebar-nav-link" role="menuitem">
                <svg class="sidebar-nav-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/>
                    <polyline points="9,22 9,12 15,12 15,22"/>
                </svg>
                <span class="sidebar-nav-text">Accueil</span>
            </a>
        </div>
        
        <div class="sidebar-nav-item" role="none">
            <a href="/pages/dashboard.html" class="sidebar-nav-link" role="menuitem">
                <svg class="sidebar-nav-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <rect x="3" y="3" width="5" height="5" rx="1"/>
                    <rect x="9.5" y="3" width="5" height="5" rx="1"/>
                    <rect x="16" y="3" width="5" height="5" rx="1"/>
                    <rect x="3" y="9.5" width="5" height="5" rx="1"/>
                    <rect x="9.5" y="9.5" width="5" height="5" rx="1"/>
                    <rect x="16" y="9.5" width="5" height="5" rx="1"/>
                    <rect x="3" y="16" width="5" height="5" rx="1"/>
                    <rect x="9.5" y="16" width="5" height="5" rx="1"/>
                    <rect x="16" y="16" width="5" height="5" rx="1"/>
                </svg>
                <span class="sidebar-nav-text">Tableau de bord</span>
            </a>
        </div>
        
        <div class="sidebar-nav-item" role="none">
            <a href="/pages/formations/index.html" class="sidebar-nav-link" role="menuitem">
                <svg class="sidebar-nav-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"/>
                    <path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"/>
                </svg>
                <span class="sidebar-nav-text">Formations</span>
            </a>
        </div>
        
        <div class="sidebar-nav-item" role="none">
            <a href="/pages/about.html" class="sidebar-nav-link" role="menuitem">
                <svg class="sidebar-nav-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M22 10v6M2 10l10-5 10 5-10 5z"/>
                    <path d="M6 12v5c3 3 9 3 12 0v-5"/>
                </svg>
                <span class="sidebar-nav-text">√Ä propos</span>
            </a>
        </div>
        
        <div class="sidebar-nav-item" role="none">
            <a href="/pages/actualites.html" class="sidebar-nav-link" role="menuitem">
                <svg class="sidebar-nav-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"/>
                    <path d="M8 6h8M8 10h8M8 14h5"/>
                    <path d="M4 2h4v4H4z"/>
                    <path d="M5 3h2v2H5z"/>
                </svg>
                <span class="sidebar-nav-text">Actualit√©s</span>
            </a>
        </div>
        
        <div class="sidebar-nav-item" role="none">
            <a href="/pages/admissions.html" class="sidebar-nav-link" role="menuitem">
                <svg class="sidebar-nav-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"/>
                    <circle cx="12" cy="7" r="4"/>
                    <path d="M18 6l4 4-4 4"/>
                    <path d="M22 10H10"/>
                    <path d="M18 6l2 2"/>
                </svg>
                <span class="sidebar-nav-text">Admissions</span>
            </a>
        </div>
        
        <div class="sidebar-nav-item" role="none">
            <a href="/pages/contact.html" class="sidebar-nav-link" role="menuitem">
                <svg class="sidebar-nav-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"/>
                    <polyline points="22,6 12,13 2,6"/>
                </svg>
                <span class="sidebar-nav-text">Contact</span>
            </a>
        </div>
    </nav>
    
    <!-- Section d'aide -->
    <div class="sidebar-aide">
        <h3 class="sidebar-aide-titre">Besoin d'aide ?</h3>
        <p class="sidebar-aide-description">
            Contactez notre √©quipe pour toute assistance
        </p>
        <button class="sidebar-aide-bouton">
            <span>Nous contacter</span>
        </button>
    </div>
</aside>

<!-- 
    SCRIPT DE GESTION DU TH√àME INT√âGR√â
    ===============================================================================
    
    Ce script est int√©gr√© dans le composant sidebar pour g√©rer le bouton de th√®me.
    Il s'initialise automatiquement quand le composant est charg√©.
    
    FONCTIONNALIT√âS :
    - D√©tection automatique du bouton de th√®me
    - Gestion des conflits d'√©v√©nements
    - Mise √† jour de l'ic√¥ne selon le th√®me
    - Retry automatique si les d√©pendances ne sont pas charg√©es
    
    D√âPENDANCES :
    - GestionnaireThemes (themes.js)
    - Variables CSS (variables.css)
-->
<script>
    // Fonction d'initialisation du bouton de th√®me
    function initialiserBoutonTheme() {
        console.log('üîç Recherche du bouton de th√®me...');
        
        // Recherche du bouton de th√®me dans le DOM
        let boutonTheme = document.getElementById('bouton-theme-dynamique');
        
        if (boutonTheme) {
            console.log('‚úÖ Bouton de th√®me trouv√©');
            
            // V√©rification de la disponibilit√© du gestionnaire de th√®mes
            if (typeof GestionnaireThemes !== 'undefined') {
                console.log('‚úÖ GestionnaireThemes disponible');
                
                // Initialisation du gestionnaire s'il n'existe pas encore
                if (!window.gestionnaireThemes) {
                    window.gestionnaireThemes = new GestionnaireThemes();
                    console.log('‚úÖ Gestionnaire de th√®mes initialis√©');
                }
                
                // Suppression des anciens √©couteurs pour √©viter les conflits
                const nouveauBouton = boutonTheme.cloneNode(true);
                boutonTheme.parentNode.replaceChild(nouveauBouton, boutonTheme);
                
                // Configuration du gestionnaire de clic
                nouveauBouton.addEventListener('click', function(e) {
                    e.preventDefault();
                    e.stopPropagation();
                    console.log('üé® Clic sur le bouton de th√®me d√©tect√©');
                    
                    if (window.gestionnaireThemes) {
                        console.log('üîÑ Appel de changerTheme()...');
                        window.gestionnaireThemes.changerTheme();
                        mettreAJourIconeTheme();
                    } else {
                        console.error('‚ùå Gestionnaire de th√®mes non disponible');
                    }
                });
                
                // Fonction de mise √† jour de l'ic√¥ne selon le th√®me
                function mettreAJourIconeTheme() {
                    const iconeTheme = document.querySelector('.icone-theme-dynamique');
                    if (iconeTheme && window.gestionnaireThemes) {
                        const themeActuel = window.gestionnaireThemes.obtenirThemeActuel();
                        console.log('üé® Th√®me actuel:', themeActuel);

                        // Ic√¥ne soleil pour le mode clair, lune pour le mode sombre
                        if (themeActuel === 'sombre') {
                            iconeTheme.innerHTML = `<path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"/>`;
                        } else {
                            iconeTheme.innerHTML = `
                                <circle cx="12" cy="12" r="5"/>
                                <path d="M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"/>
                            `;
                        }
                    }
                }
                
                // Initialisation de l'ic√¥ne au chargement
                mettreAJourIconeTheme();
                
                // Configuration du bouton d'aide
                const boutonAide = document.querySelector('.sidebar-aide-bouton');
                if (boutonAide) {
                    boutonAide.addEventListener('click', function() {
                        console.log('üí¨ Redirection vers contact');
                        window.location.href = '/pages/contact.html';
                    });
                }
                
                console.log('‚úÖ Bouton de th√®me configur√© avec succ√®s');
            } else {
                console.log('‚è≥ Gestionnaire de th√®mes pas encore charg√©, r√©essai dans 200ms...');
                setTimeout(initialiserBoutonTheme, 200);
            }
        } else {
            console.error('‚ùå Bouton de th√®me non trouv√©');
        }
    }

    // Initialisation automatique au chargement du DOM
    document.addEventListener('DOMContentLoaded', function() {
        console.log('üöÄ Initialisation du bouton de th√®me...');
        setTimeout(initialiserBoutonTheme, 200);
    });
</script>
